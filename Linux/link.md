## Symbolic Link(심볼릭 링크) & Hard Link(하드 링크)

### 1. Symbolic Link
### (1) 심볼릭 링크란?
- 특정 파일이나 디렉터리에 대한 참조를 포함하는 특별한 파일이다. 간단하게 Windows 운영체제에서 '바로가기'와 같은 기능을 한다고 보면 된다. 
- 리눅스 명령어 중 ln 명령어로 생성 및 삭제를 할 수 있다.
- ln 명령어는 Link의 약어로 링크를 만들고 삭제하는 명령어이다. 
- ln 명령어로 심볼릭링크와 하드링크 두 종류의 링크 파일 및 링크 폴더를 생성, 삭제가 가능하다. 

### (2) 심볼릭 링크 사용법

#### - 심볼릭 링크 생성
- `link` 라는 시스템 호출을 사용하는 `ln`이라는 명령어를 사용한다. 이 명령어에 `-s` 옵션이 지정되면 `symlink` 시스템 호출이 대신 사용되면서 심볼릭 링크가 생성된다. 
```bash
$ ln -s [원본 파일 or 원본 디렉터리] [링크 경로]
```
예를 들어, `/data/real/` 폴더가 존재할 때 `/data/symbolic` 폴더를 클릭할 때 `real` 폴더를 사용하도록 하고 싶을 경우 다음과 같이 생성할 수 있다. 
```bash
$ ls -s /data/real /data/symbolic
```

링크 경로는 존재하지 않는 대상을 지정할 수도 있다. 
```bash 
# 테스트 파일 생성
$ echo "hi" > test.txt

# 테스트 파일에 대한 'link_a' 심볼릭 링크 생성
$ ln -s test.txt link_a
$ ls -l
```

#### - 심볼릭 링크 삭제
`rm` 명령어를 사용하여 심볼릭 링크를 삭제할 수 있다. 파일, 폴더 모두 `rm`명령어로 삭제 가능
```bash
$ rm link_b
```
```
$ rm -f /data/symbolic/
```

주의할 점은 원본 디렉터리에 대한 심볼릭 링크를 삭제하면서 `-r`, `-f`와 같은 옵션을 사용할 경우이다. 
아래의 경우 원본 내의 파일들이 삭제될 수 있다.
```bash
# test 디렉터리 생성
$ mkdir test

# test 디렉터리 하위에 test.txt 파일 생성
$ echo "hi" > test/test.txt

# 테스트 디렉터리에 대한 'link_b' 심볼릭 링크 생성
$ ln -s test link_b

# 심볼릭 링크 삭제 - 이 경우 test 디렉터리는 삭제되지 않았으나, 내부의 파일은 삭제된다. 
$ rm -r link_b/
```

#### - 심볼릭 링크 변경
심볼릭 링크 추가 후 변경을 원하는 경우, 링크 삭제 후 재생성하면 되지만 링크를 유지한 상태에서 가리키는 원본 대상만 변경하는 방법이 있다. 
```bash
$ ln -Tfs [새로운 경로] [심볼릭 링크]
```
`-T`: 링크를 일반 파일로 취급하는 옵션
`-f`: 기존 심볼릭 링크가 있는 경우 덮어쓰는 옵션. 이 옵션을 제외하는 경우, 이미 심볼릭 링크가 존재하는 경우 변경이 불가하다.

```bash
# test1 디렉터리에 대한 link_a 심볼릭 링크 생성
$ ln -s test1 link_a

# test2 디렉터리에 대한 link_a 심볼릭 링크 생성 -> 생성되지 않음
$ ln -s test2 link_a

# '-Tfs' 옵션을 사용하여 원본 타겟 변경
$ ln -Tfs test2 link_a
```

---
### 2. Hard Link
### (1) 하드 링크란?
- 원본 파일 또는 폴더가 존재할 경우 심볼릭 링크가 바로가기 개념이라면, 하드 링크는 원본의 복사본으로 볼 수 있다.
- 심볼릭 링크는 원본 링크를 걸면 링크 개수가 증가하지 않고 inode number도 원본과 다르지만, 하드 링크는 원본 링크와 같이 링크 개수가 증가하고 inode number도 같다. 
- 따라서 원본 파일이 삭제되더라도 사용 가능하다. 

### (2) 하드 링크 사용법
- 하드 링크는 같은 디스크 파티션에 있는 파일만 참조가 가능하다. 
  - 즉, c드라이브 내에서 d드라이브로 하드 링크를 걸 수 없다. 
-  디렉터리는 링크 생성 불가. 파일만 링크 가능

#### - 하드 링크 생성
`ln` 명령어를 사용할 때 `-s` 옵션을 사용하지 않는 경우 하드 링크(hard link)가 생성된다.
```bash
$ ln -s [원본 파일] [링크 파일]
```
예를 들어, `/data/real.txt` 파일이 존재할 때 `/data/hard.txt` 파일을 클릭할 때 `real` 파일을 사용하도록 하고 싶을 경우 다음과 같이 생성할 수 있다. 
```bash
$ ls -s /data/real.txt /data/hard.txt
```
#### - 하드 링크 삭제
```bash
$ rm -f /data/hard.txt
```

---
- 참고 사이트
  - https://madplay.github.io/post/what-is-a-symbolic-link-in-linux
  - https://min-nine.tistory.com/95
  - https://it-serial.tistory.com/44
